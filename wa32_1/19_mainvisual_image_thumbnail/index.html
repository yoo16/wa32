<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="css/style.css">

  <link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="../css/prism.css">
  <link rel="stylesheet" href="../css/default.css">

  <title>WA32 メインビジュアル 01</title>
</head>

<body>
  <div class="container">
    <div><a href="../">Back</a></div>
    <h1 class="h1">サムネイル画像のクリック切り替え</h1>

    <div>
      <div id="photoBox">
        <ul id="photoList">
          <li><img src="images/photo0.jpg"></li>
          <li><img src="images/photo1.jpg"></li>
          <li><img src="images/photo2.jpg"></li>
          <li><img src="images/photo3.jpg"></li>
        </ul>
        <div id="thumbnailList">
          <ul>
            <li><a><img src="images/tn0.jpg"></a></li>
            <li><a><img src="images/tn1.jpg"></a></li>
            <li><a><img src="images/tn2.jpg"></a></li>
            <li><a><img src="images/tn3.jpg"></a></li>
          </ul>
        </div>
      </div>
    </div>

    <div id="code">
      <h2 class="h2">HTML</h2>
      <script type="text/plain" class="language-markup">
      <div id="photoBox">
        <ul id="photoList">
          <li><img src="images/photo0.jpg"></li>
          <li><img src="images/photo1.jpg"></li>
          <li><img src="images/photo2.jpg"></li>
          <li><img src="images/photo3.jpg"></li>
        </ul>
        <div id="thumbnailList">
          <ul>
            <li><a><img src="images/tn0.jpg"></a></li>
            <li><a><img src="images/tn1.jpg"></a></li>
            <li><a><img src="images/tn2.jpg"></a></li>
            <li><a><img src="images/tn3.jpg"></a></li>
          </ul>
        </div>
      </div>
      </script>

      <h2 class="h2">CSS</h2>
      <pre class="language-css"><code>
      #photoList img {
          width: 200px;
      }
      
      #photoList li {
          position: absolute;
          display: none;
          list-style: none;
      }
      
      #thumbnailList {
          position: relative;
          top: 300px;
          width: 480px;
      }
      
      #thumbnailList li {
          float: left;
          width: 100px;
          list-style: none;
          margin: 0;
          padding: 0;
      }
      </code></pre>

      <h2 class="h2">JS</h2>
      <pre class="language-javascript"><code>
      $(function () {
          function photoChange(target) {
              let photoList = target.find('#photoList li');
              let thumbnailList = [];
              let current = 0;
      
              // 画像のフェードイン
              function open() {
                  thumbnailList[current].attr('src', 'images/tn' + current + '_ac.jpg');
                  $(photoList[current]).stop().fadeIn(1000, 'easeInQuad');
              }
      
              // 画像のフェードアウト
              function close() {
                  thumbnailList[current].attr('src', 'images/tn' + current + '.jpg');
                  $(photoList[current]).stop().fadeOut(1000, 'easeOutQuad');
              }
      
              // サムネイル画像による画像切り替え
              function clickThumbnail(num) {
                  if (current != num) {
                      close();
                      current = num;
                      open();
                  }
              }
      
              // 初期設定
              function init() {
                  target.find('#thumbnailList li').each(function (index) {
                      thumbnailList[index] = $(this).find('img');
                      $(this).find('a').on('click', function () {
                          clickThumbnail(index);
                      });
                  });
              }
      
              init();
              open();
          }
      
          photoChange($('#photoBox'));
      });
      </code></pre>

      <h2 class="h2">photoChange() 内の関数定義</h2>
      <pre class="language-javascript"><code>
      function photoChange(target) {
          function open() {
          }
  
          function close() {
          }
  
          function clickThumbnail(num) {
          }
  
          init();
          open()
      }
      </code></pre>

      <h2 class="h2">ready イベント内の関数定義</h2>
      <pre class="language-javascript"><code>
      $(function () {
          function photoChange(target) {
          }

          photoChange($('#photoBox'));
      }
      </code></pre>

      <h2 class="h2">初期化</h2>
      <pre class="language-javascript"><code>
      target.find('#thumbnailList li').each(function (index) {
          thumbnailList[index] = $(this).find('img');
          $(this).find('a').on('click', function () {
              //$(this) = #thumbnailList li の index 番目の要素
              clickThumbnail(index);
          });
      });
      </code></pre>
      <ul>
        <li>サムネイルの li を個数分繰り返す</li>
        <li>index 番号が順に返される</li>
        <li>thumbnailList 配列に img を追加</li>
        <li>a に click イベント登録</li>
        <li>a をクリックすると clickThumbnail(index) を実行する</li>
      </ul>

      <h2 class="h2">find()</h2>
      <p>セレクタの中にある、子要素を取得</p>
      <pre class="language-javascript"><code>
      $(セレクタ).find(子要素)
      </code></pre>

      <pre class="language-javascript"><code>
      let photoList = target.find('#photoList li');
      </code></pre>

      <h2 class="h2">画像の読み込み</h2>
      <p>img に src を設定</p>
      <pre class="language-javascript"><code>
      $('img').attr('src', '画像パス');
      </code></pre>

      <pre class="language-javascript"><code>
      thumbnailList[current].attr('src', 'images/tn' + current + '_ac.jpg');
      </code></pre>
    </div>

  </div>

  <script src="../js/jquery-3.5.0.min.js"></script>
  <script src="../js/jquery-ui.min.js"></script>
  <script src="js/main.js"></script>


  <script src="../js/bootstrap/bootstrap.bundle.min.js"></script>
  <script src="../js/prism.js"></script>
</body>

</html>